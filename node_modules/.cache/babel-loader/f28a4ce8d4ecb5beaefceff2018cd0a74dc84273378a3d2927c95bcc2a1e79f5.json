{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\cart\\\\src\\\\App.js\";\nimport React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.handleIncreaseQuantity = product => {\n      console.log('hey please increase the quantity', product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n\n      // products[index].qty +=1;\n\n      // this.setState({\n      //     products\n      // })\n      const docRef = this.db.collection('products').doc(products[index].id);\n      docRef.update({\n        qty: products[index].qty + 1\n      }).then(() => {\n        console.log('Updated');\n      }).catch(error => {\n        console.log('Error:', error);\n      });\n    };\n    this.handledecreaseQuantity = product => {\n      console.log('hey please increase the quantity', product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n      // if (products[index].qty===0) {\n      //     return;\n      // }\n      // products[index].qty -=1;\n\n      // this.setState({\n      //     products\n      // })\n      const docRef = this.db.collection('products').doc(products[index].id);\n      if (products[index].qty === 0) {\n        return;\n      }\n      docRef.update({\n        qty: products[index].qty - 1\n      }).then(() => {\n        console.log('Updated');\n      }).catch(error => {\n        console.log('Error:', error);\n      });\n    };\n    this.handleDeleteProduct = id => {\n      // const { products } = this.state;\n\n      // const items = products.filter((item) => item.id !== id);\n      // this.setState({\n      //     products: items\n      // })\n      const docRef = this.db.collection('products').doc(id);\n      docRef.delete().tehen(() => {\n        console.log('deleted');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n    this.getCartCount = () => {\n      const {\n        products\n      } = this.state;\n      let count = 0;\n      products.forEach(product => {\n        count += product.qty;\n      });\n      return count;\n    };\n    this.getCartTotal = () => {\n      const {\n        products\n      } = this.state;\n      let cartTotal = 0;\n      products.map(product => {\n        cartTotal = cartTotal + product.qty * product.price;\n        return '';\n      });\n      return cartTotal;\n    };\n    this.addProduct = () => {\n      this.db.collection('products').add({\n        img: '',\n        price: 999,\n        qty: 33,\n        title: 'Washing Machine'\n      }).then(docRef => {\n        console.log(\"doc added\", docRef);\n      }).catch(error => {\n        console.log(\"error: \", error);\n      });\n    };\n    this.state = {\n      products: [],\n      loading: true\n    };\n    this.db = firebase.firestore();\n  }\n  componentDidMount() {\n    // firebase\n    //   .firestore()\n    //   .collection('products')\n    //   .get()\n    //   .then((snapshot) => {\n    //     console.log(snapshot);\n\n    //     snapshot.docs.map((doc) => {\n    //       console.log(doc.data());\n    //     });\n\n    //     const products = snapshot.docs.map((doc) =>{\n    //       const data= doc.data();\n    //       data['id'] = doc.id\n    //       return data;\n    //     })\n    //     this.setState({\n    //       products,\n    //       loading: false\n    //     })\n\n    //   })\n\n    this.db.collection('products')\n    // .where('price','==',999)\n    // .where('title','==','Laptop')\n    .orderBy('title', 'desc').onSnapshot(snapshot => {\n      console.log(snapshot);\n      snapshot.docs.map(doc => {\n        console.log(doc.data());\n        return '';\n      });\n      const products = snapshot.docs.map(doc => {\n        const data = doc.data();\n        data['id'] = doc.id;\n        return data;\n      });\n      this.setState({\n        products,\n        loading: false\n      });\n    });\n  }\n  render() {\n    const {\n      products,\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        count: this.getCartCount()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.addProduct,\n        type: \"button\",\n        className: \"btn btn-danger\",\n        style: {\n          marginLeft: 50,\n          marginTop: 20\n        },\n        children: \"Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {\n        products: products,\n        onIncreaseQuantity: this.handleIncreaseQuantity,\n        ondecreaseQuantity: this.handledecreaseQuantity,\n        onDeleteProduct: this.handleDeleteProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading ....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 10,\n          fontSize: 20\n        },\n        children: [\"TOTAL: \", this.getCartTotal()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Cart","Navbar","firebase","App","Component","constructor","handleIncreaseQuantity","product","console","log","products","state","index","indexOf","docRef","db","collection","doc","id","update","qty","then","catch","error","handledecreaseQuantity","handleDeleteProduct","delete","tehen","getCartCount","count","forEach","getCartTotal","cartTotal","map","price","addProduct","add","img","title","loading","firestore","componentDidMount","orderBy","onSnapshot","snapshot","docs","data","setState","render","marginLeft","marginTop","padding","fontSize"],"sources":["C:/Users/HP/OneDrive/Desktop/cart/src/App.js"],"sourcesContent":["\r\nimport React from 'react';\r\nimport Cart from './Cart';\r\nimport Navbar from './Navbar';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/firestore';\r\n\r\nclass App extends React.Component {\r\n  constructor () {\r\n    super();\r\n    this.state = {\r\n        products: [],\r\n        loading: true\r\n    }\r\n    this.db = firebase.firestore()\r\n}\r\ncomponentDidMount () {\r\n    // firebase\r\n    //   .firestore()\r\n    //   .collection('products')\r\n    //   .get()\r\n    //   .then((snapshot) => {\r\n    //     console.log(snapshot);\r\n\r\n    //     snapshot.docs.map((doc) => {\r\n    //       console.log(doc.data());\r\n    //     });\r\n\r\n    //     const products = snapshot.docs.map((doc) =>{\r\n    //       const data= doc.data();\r\n    //       data['id'] = doc.id\r\n    //       return data;\r\n    //     })\r\n    //     this.setState({\r\n    //       products,\r\n    //       loading: false\r\n    //     })\r\n\r\n    //   })\r\n\r\n    this.db\r\n      .collection('products')\r\n      // .where('price','==',999)\r\n      // .where('title','==','Laptop')\r\n      .orderBy('title','desc')\r\n      .onSnapshot((snapshot) => {\r\n        console.log(snapshot);\r\n\r\n        snapshot.docs.map((doc) => {\r\n          console.log(doc.data());\r\n          return ''\r\n        });\r\n\r\n        const products = snapshot.docs.map((doc) =>{\r\n          const data= doc.data();\r\n          data['id'] = doc.id\r\n          return data;\r\n        })\r\n        this.setState({\r\n          products,\r\n          loading: false\r\n        })\r\n\r\n      })\r\n}\r\n\r\nhandleIncreaseQuantity = (product) => {\r\n    console.log('hey please increase the quantity' , product);\r\n    const { products } = this.state;\r\n    const index = products.indexOf(product);\r\n\r\n    // products[index].qty +=1;\r\n\r\n    // this.setState({\r\n    //     products\r\n    // })\r\n    const docRef = this.db.collection('products').doc(products[index].id);\r\n    docRef\r\n      .update({\r\n        qty: products[index].qty+1\r\n      })\r\n      .then(() => {\r\n        console.log('Updated');\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error:', error);\r\n      })\r\n}\r\nhandledecreaseQuantity = (product) => {\r\n    console.log('hey please increase the quantity' , product);\r\n    const { products } = this.state;\r\n    const index = products.indexOf(product);\r\n    // if (products[index].qty===0) {\r\n    //     return;\r\n    // }\r\n    // products[index].qty -=1;\r\n\r\n    // this.setState({\r\n    //     products\r\n    // })\r\n    const docRef = this.db.collection('products').doc(products[index].id);\r\n    if (products[index].qty===0) {\r\n      return;\r\n    }\r\n    docRef\r\n    .update({\r\n      qty: products[index].qty-1\r\n    })\r\n    .then(() => {\r\n      console.log('Updated');\r\n    })\r\n    .catch((error) => {\r\n      console.log('Error:', error);\r\n    })\r\n\r\n\r\n\r\n}\r\nhandleDeleteProduct = (id) => {\r\n    // const { products } = this.state;\r\n\r\n    // const items = products.filter((item) => item.id !== id);\r\n    // this.setState({\r\n    //     products: items\r\n    // })\r\n    const docRef = this.db.collection('products').doc(id);\r\n    docRef\r\n      .delete()\r\n      .tehen(() => {\r\n        console.log('deleted')\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error' , error)\r\n      })\r\n}\r\ngetCartCount =() =>{\r\n  const { products } = this.state;\r\n\r\n  let count = 0;\r\n\r\n  products.forEach((product) => {\r\n    count += product.qty;\r\n  })\r\n  return count;\r\n}\r\ngetCartTotal= () => {\r\n  const{ products } = this.state;\r\n  let cartTotal=0;\r\n\r\n  products.map((product) => {\r\n    cartTotal= cartTotal + product.qty * product.price;\r\n    return '';\r\n  })\r\n  return cartTotal;\r\n}\r\naddProduct = () => {\r\n  this.db\r\n  .collection('products')\r\n  .add({\r\n    img: '',\r\n    price: 999,\r\n    qty: 33,\r\n    title: 'Washing Machine'\r\n  })\r\n  .then((docRef) => {\r\n    console.log(\"doc added\", docRef)\r\n  })\r\n  .catch((error) =>{\r\n    console.log(\"error: \", error)\r\n  }\r\n\r\n  )\r\n  \r\n}\r\n  render() {\r\n    const { products, loading } = this.state;\r\n  return (\r\n    \r\n    <div className=\"App\" >\r\n      <Navbar count={this.getCartCount()} />\r\n      <button onClick={this.addProduct} type=\"button\" className=\"btn btn-danger\" style={{marginLeft:50,marginTop:20}}>Add Product</button>\r\n      <Cart\r\n      products={products}\r\n      onIncreaseQuantity={this.handleIncreaseQuantity}\r\n      ondecreaseQuantity={this.handledecreaseQuantity}\r\n      onDeleteProduct={this.handleDeleteProduct}\r\n      />\r\n      {loading && <h1>Loading ....</h1>}\r\n      <div style ={{padding: 10, fontSize:20}}>TOTAL: {this.getCartTotal()}</div>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}