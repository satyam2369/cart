{"ast":null,"code":"import _classCallCheck from\"C:/Users/HP/OneDrive/Desktop/cart/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/HP/OneDrive/Desktop/cart/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/HP/OneDrive/Desktop/cart/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/HP/OneDrive/Desktop/cart/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Cart from'./Cart';import Navbar from'./Navbar';import'bootstrap/dist/css/bootstrap.css';import firebase from'firebase/compat/app';import'firebase/compat/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.handleIncreaseQuantity=function(product){console.log('hey please increase the quantity',product);var products=_this.state.products;var index=products.indexOf(product);// products[index].qty +=1;\n// this.setState({\n//     products\n// })\nvar docRef=_this.db.collection('products').doc(products[index].id);docRef.update({qty:products[index].qty+1}).then(function(){console.log('Updated');}).catch(function(error){console.log('Error:',error);});};_this.handledecreaseQuantity=function(product){console.log('hey please increase the quantity',product);var products=_this.state.products;var index=products.indexOf(product);// if (products[index].qty===0) {\n//     return;\n// }\n// products[index].qty -=1;\n// this.setState({\n//     products\n// })\nvar docRef=_this.db.collection('products').doc(products[index].id);if(products[index].qty===0){return;}docRef.update({qty:products[index].qty-1}).then(function(){console.log('Updated');}).catch(function(error){console.log('Error:',error);});};_this.handleDeleteProduct=function(id){// const { products } = this.state;\n// const items = products.filter((item) => item.id !== id);\n// this.setState({\n//     products: items\n// })\nvar docRef=_this.db.collection('products').doc(id);docRef.delete().tehen(function(){console.log('deleted');}).catch(function(error){console.log('Error',error);});};_this.getCartCount=function(){var products=_this.state.products;var count=0;products.forEach(function(product){count+=product.qty;});return count;};_this.getCartTotal=function(){var products=_this.state.products;var cartTotal=0;products.map(function(product){cartTotal=cartTotal+product.qty*product.price;return'';});return cartTotal;};_this.addProduct=function(){_this.db.collection('products').add({img:'',price:999,qty:33,title:'Washing Machine'}).then(function(docRef){console.log(\"doc added\",docRef);}).catch(function(error){console.log(\"error: \",error);});};_this.state={products:[],loading:true};_this.db=firebase.firestore();return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// firebase\n//   .firestore()\n//   .collection('products')\n//   .get()\n//   .then((snapshot) => {\n//     console.log(snapshot);\n//     snapshot.docs.map((doc) => {\n//       console.log(doc.data());\n//     });\n//     const products = snapshot.docs.map((doc) =>{\n//       const data= doc.data();\n//       data['id'] = doc.id\n//       return data;\n//     })\n//     this.setState({\n//       products,\n//       loading: false\n//     })\n//   })\nthis.db.collection('products')// .where('price','==',999)\n// .where('title','==','Laptop')\n.orderBy('title','desc').onSnapshot(function(snapshot){console.log(snapshot);snapshot.docs.map(function(doc){console.log(doc.data());return'';});var products=snapshot.docs.map(function(doc){var data=doc.data();data['id']=doc.id;return data;});_this2.setState({products:products,loading:false});});}},{key:\"render\",value:function render(){var _this$state=this.state,products=_this$state.products,loading=_this$state.loading;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{count:this.getCartCount()}),/*#__PURE__*/_jsx(\"button\",{onClick:this.addProduct,type:\"button\",className:\"btn btn-danger\",style:{marginLeft:50,marginTop:20},children:\"Add Product\"}),/*#__PURE__*/_jsx(Cart,{products:products,onIncreaseQuantity:this.handleIncreaseQuantity,ondecreaseQuantity:this.handledecreaseQuantity,onDeleteProduct:this.handleDeleteProduct}),loading&&/*#__PURE__*/_jsx(\"h1\",{children:\"Loading ....\"}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,fontSize:20},children:[\"TOTAL: \",this.getCartTotal()]})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"names":["React","Cart","Navbar","firebase","App","handleIncreaseQuantity","product","console","log","products","state","index","indexOf","docRef","db","collection","doc","id","update","qty","then","catch","error","handledecreaseQuantity","handleDeleteProduct","delete","tehen","getCartCount","count","forEach","getCartTotal","cartTotal","map","price","addProduct","add","img","title","loading","firestore","orderBy","onSnapshot","snapshot","docs","data","setState","marginLeft","marginTop","padding","fontSize","Component"],"sources":["C:/Users/HP/OneDrive/Desktop/cart/src/App.js"],"sourcesContent":["\r\nimport React from 'react';\r\nimport Cart from './Cart';\r\nimport Navbar from './Navbar';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/firestore';\r\n\r\nclass App extends React.Component {\r\n  constructor () {\r\n    super();\r\n    this.state = {\r\n        products: [],\r\n        loading: true\r\n    }\r\n    this.db = firebase.firestore()\r\n}\r\ncomponentDidMount () {\r\n    // firebase\r\n    //   .firestore()\r\n    //   .collection('products')\r\n    //   .get()\r\n    //   .then((snapshot) => {\r\n    //     console.log(snapshot);\r\n\r\n    //     snapshot.docs.map((doc) => {\r\n    //       console.log(doc.data());\r\n    //     });\r\n\r\n    //     const products = snapshot.docs.map((doc) =>{\r\n    //       const data= doc.data();\r\n    //       data['id'] = doc.id\r\n    //       return data;\r\n    //     })\r\n    //     this.setState({\r\n    //       products,\r\n    //       loading: false\r\n    //     })\r\n\r\n    //   })\r\n\r\n    this.db\r\n      .collection('products')\r\n      // .where('price','==',999)\r\n      // .where('title','==','Laptop')\r\n      .orderBy('title','desc')\r\n      .onSnapshot((snapshot) => {\r\n        console.log(snapshot);\r\n\r\n        snapshot.docs.map((doc) => {\r\n          console.log(doc.data());\r\n          return ''\r\n        });\r\n\r\n        const products = snapshot.docs.map((doc) =>{\r\n          const data= doc.data();\r\n          data['id'] = doc.id\r\n          return data;\r\n        })\r\n        this.setState({\r\n          products,\r\n          loading: false\r\n        })\r\n\r\n      })\r\n}\r\n\r\nhandleIncreaseQuantity = (product) => {\r\n    console.log('hey please increase the quantity' , product);\r\n    const { products } = this.state;\r\n    const index = products.indexOf(product);\r\n\r\n    // products[index].qty +=1;\r\n\r\n    // this.setState({\r\n    //     products\r\n    // })\r\n    const docRef = this.db.collection('products').doc(products[index].id);\r\n    docRef\r\n      .update({\r\n        qty: products[index].qty+1\r\n      })\r\n      .then(() => {\r\n        console.log('Updated');\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error:', error);\r\n      })\r\n}\r\nhandledecreaseQuantity = (product) => {\r\n    console.log('hey please increase the quantity' , product);\r\n    const { products } = this.state;\r\n    const index = products.indexOf(product);\r\n    // if (products[index].qty===0) {\r\n    //     return;\r\n    // }\r\n    // products[index].qty -=1;\r\n\r\n    // this.setState({\r\n    //     products\r\n    // })\r\n    const docRef = this.db.collection('products').doc(products[index].id);\r\n    if (products[index].qty===0) {\r\n      return;\r\n    }\r\n    docRef\r\n    .update({\r\n      qty: products[index].qty-1\r\n    })\r\n    .then(() => {\r\n      console.log('Updated');\r\n    })\r\n    .catch((error) => {\r\n      console.log('Error:', error);\r\n    })\r\n\r\n\r\n\r\n}\r\nhandleDeleteProduct = (id) => {\r\n    // const { products } = this.state;\r\n\r\n    // const items = products.filter((item) => item.id !== id);\r\n    // this.setState({\r\n    //     products: items\r\n    // })\r\n    const docRef = this.db.collection('products').doc(id);\r\n    docRef\r\n      .delete()\r\n      .tehen(() => {\r\n        console.log('deleted')\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error' , error)\r\n      })\r\n}\r\ngetCartCount =() =>{\r\n  const { products } = this.state;\r\n\r\n  let count = 0;\r\n\r\n  products.forEach((product) => {\r\n    count += product.qty;\r\n  })\r\n  return count;\r\n}\r\ngetCartTotal= () => {\r\n  const{ products } = this.state;\r\n  let cartTotal=0;\r\n\r\n  products.map((product) => {\r\n    cartTotal= cartTotal + product.qty * product.price;\r\n    return '';\r\n  })\r\n  return cartTotal;\r\n}\r\naddProduct = () => {\r\n  this.db\r\n  .collection('products')\r\n  .add({\r\n    img: '',\r\n    price: 999,\r\n    qty: 33,\r\n    title: 'Washing Machine'\r\n  })\r\n  .then((docRef) => {\r\n    console.log(\"doc added\", docRef)\r\n  })\r\n  .catch((error) =>{\r\n    console.log(\"error: \", error)\r\n  }\r\n\r\n  )\r\n  \r\n}\r\n  render() {\r\n    const { products, loading } = this.state;\r\n  return (\r\n    \r\n    <div className=\"App\" >\r\n      <Navbar count={this.getCartCount()} />\r\n      <button onClick={this.addProduct} type=\"button\" className=\"btn btn-danger\" style={{marginLeft:50,marginTop:20}}>Add Product</button>\r\n      <Cart\r\n      products={products}\r\n      onIncreaseQuantity={this.handleIncreaseQuantity}\r\n      ondecreaseQuantity={this.handledecreaseQuantity}\r\n      onDeleteProduct={this.handleDeleteProduct}\r\n      />\r\n      {loading && <h1>Loading ....</h1>}\r\n      <div style ={{padding: 10, fontSize:20}}>TOTAL: {this.getCartTotal()}</div>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}